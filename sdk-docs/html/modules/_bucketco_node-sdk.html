---
layout:
  visible: true
title:
  visible: true
description:
  visible: false
tableOfContents:
  visible: true
outline:
  visible: true
pagination:
  visible: true
---

<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@bucketco/node-sdk | Documentation</title><meta name="description" content="Documentation for Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Documentation</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">Documentation</a></li><li><a href="_bucketco_node-sdk.html">@bucketco/node-sdk</a></li></ul><h1>Module @bucketco/node-sdk</h1></div><section class="tsd-panel tsd-typography"><a id="bucket-nodejs-sdk" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Bucket Node.js SDK<a href="#bucket-nodejs-sdk" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Node.js, JavaScriptS/Typescript feature flag and tracking client for <a href="https://bucket.co">Bucket.co</a>.</p>
<a id="installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Install using <code>yarn</code> or <code>npm</code> with:</p>
<blockquote>
<p><code>yarn add -s @bucketco/node-sdk</code> or <code>npm install -s @bucketco/node-sdk</code>.</p>
</blockquote>
<p>Other supported languages/frameworks are in the
<a href="https://docs.bucket.co/quickstart/supported-languages">Supported languages</a>
documentation pages.</p>
<p>You can also <a href="https://docs.bucket.co/reference/http-tracking-api">use the HTTP API directly</a></p>
<a id="basic-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Basic usage<a href="#basic-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To get started you need to obtain your secret key from the
<a href="https://app.bucket.co/envs/current/settings/app-environments">environment settings</a>
in Bucket.</p>
<p>{% hint style=&quot;danger&quot; %}
Secret keys are meant for use in server side SDKs only.
Secret keys offer the users the ability to obtain
information that is often sensitive and thus should not be used in
client-side applications.
{% endhint %}</p>
<p>Bucket will load settings through the various environment variables automatically (see <a href="#configuring">Configuring</a> below).</p>
<ol>
<li>Find the Bucket secret key for your development environment under <a href="https://app.bucket.co/envs/current/settings/app-environments">environment settings</a> in Bucket.</li>
<li>Set <code>BUCKET_SECRET_KEY</code> in your <code>.env</code> file</li>
<li>Create a <code>bucket.ts</code> file containing the following:</li>
</ol>
<pre><code class="typescript"><span class="hl-17">import</span><span class="hl-1"> { </span><span class="hl-4">BucketClient</span><span class="hl-1"> } </span><span class="hl-17">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@bucketco/node-sdk&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Create a new instance of the client with the secret key. Additional options</span><br/><span class="hl-6">// are available, such as supplying a logger and other custom properties.</span><br/><span class="hl-6">//</span><br/><span class="hl-6">// We recommend that only one global instance of `client` should be created</span><br/><span class="hl-6">// to avoid multiple round-trips to our servers.</span><br/><span class="hl-17">export</span><span class="hl-1"> </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">bucketClient</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">BucketClient</span><span class="hl-1">();</span><br/><br/><span class="hl-6">// Initialize the client and begin fetching feature targeting definitions.</span><br/><span class="hl-6">// You must call this method prior to any calls to `getFeatures()`,</span><br/><span class="hl-6">// otherwise an empty object will be returned.</span><br/><span class="hl-4">bucketClient</span><span class="hl-1">.</span><span class="hl-3">initialize</span><span class="hl-1">().</span><span class="hl-3">then</span><span class="hl-1">({</span><br/><span class="hl-1">  console.log(</span><span class="hl-5">&quot;Bucket initialized!&quot;</span><span class="hl-4">)</span><br/><span class="hl-4">})</span>
</code><button type="button">Copy</button></pre>

<p>Once the client is initialized, you can obtain features along with the <code>isEnabled</code>
status to indicate whether the feature is targeted for this user/company:</p>
<p><em>Note</em>: If <code>user.id</code> or <code>company.id</code> is not given, the whole <code>user</code> or <code>company</code> object is ignored.</p>
<pre><code class="typescript"><span class="hl-6">// configure the client</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">boundClient</span><span class="hl-1"> = </span><span class="hl-4">bucketClient</span><span class="hl-1">.</span><span class="hl-3">bindClient</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-5">&quot;john_doe&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;John Doe&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">email:</span><span class="hl-1"> </span><span class="hl-5">&quot;john@acme.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">company:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-5">&quot;acme_inc&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;Acme, Inc.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// get the huddle feature using company, user and custom context to</span><br/><span class="hl-6">// evaluate the targeting.</span><br/><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">isEnabled</span><span class="hl-1">, </span><span class="hl-2">track</span><span class="hl-1"> } = </span><span class="hl-4">boundClient</span><span class="hl-1">.</span><span class="hl-3">getFeature</span><span class="hl-1">(</span><span class="hl-5">&quot;huddle&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-17">if</span><span class="hl-1"> (</span><span class="hl-4">isEnabled</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">// this is your feature gated code ...</span><br/><span class="hl-1">  </span><span class="hl-6">// send an event when the feature is used:</span><br/><span class="hl-1">  </span><span class="hl-3">track</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// CAUTION: if you plan to use the event for automated feedback surveys</span><br/><span class="hl-1">  </span><span class="hl-6">// call `flush` immediately after `track`. It can optionally be awaited</span><br/><span class="hl-1">  </span><span class="hl-6">// to guarantee the sent happened.</span><br/><span class="hl-1">  </span><span class="hl-4">boundClient</span><span class="hl-1">.</span><span class="hl-3">flush</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>You can also use the <code>getFeatures()</code> method which returns a map of all features:</p>
<pre><code class="typescript"><span class="hl-6">// get the current features (uses company, user and custom context to</span><br/><span class="hl-6">// evaluate the features).</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">features</span><span class="hl-1"> = </span><span class="hl-4">boundClient</span><span class="hl-1">.</span><span class="hl-3">getFeatures</span><span class="hl-1">();</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">bothEnabled</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-4">features</span><span class="hl-1">.</span><span class="hl-4">huddle</span><span class="hl-1">?.</span><span class="hl-4">isEnabled</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">features</span><span class="hl-1">.</span><span class="hl-4">voiceHuddle</span><span class="hl-1">?.</span><span class="hl-4">isEnabled</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<a id="high-performance-feature-targeting" class="tsd-anchor"></a><h2 class="tsd-anchor-link">High performance feature targeting<a href="#high-performance-feature-targeting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Bucket Node SDK contacts the Bucket servers when you call <code>initialize()</code>
and downloads the features with their targeting rules.
These rules are then matched against the user/company information you provide
to <code>getFeatures()</code> (or through <code>bindClient(..).getFeatures()</code>). That means the
<code>getFeatures()</code> call does not need to contact the Bucket servers once
<code>initialize()</code> has completed. <code>BucketClient</code> will continue to periodically
download the targeting rules from the Bucket servers in the background.</p>
<a id="configuring" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Configuring<a href="#configuring" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Bucket <code>Node.js</code> SDK can be configured through environment variables,
a configuration file on disk or by passing options to the <code>BucketClient</code>
constructor. By default, the SDK searches for <code>bucketConfig.json</code> in the
current working directory.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Description</th>
<th>Env Var</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>secretKey</code></td>
<td>string</td>
<td>The secret key used for authentication with Bucket's servers.</td>
<td>BUCKET_SECRET_KEY</td>
</tr>
<tr>
<td><code>logLevel</code></td>
<td>string</td>
<td>The log level for the SDK (e.g., <code>&quot;DEBUG&quot;</code>, <code>&quot;INFO&quot;</code>, <code>&quot;WARN&quot;</code>, <code>&quot;ERROR&quot;</code>). Default: <code>INFO</code></td>
<td>BUCKET_LOG_LEVEL</td>
</tr>
<tr>
<td><code>offline</code></td>
<td>boolean</td>
<td>Operate in offline mode. Default: <code>false</code>, except in tests it will default to <code>true</code> based off of the <code>TEST</code> env. var.</td>
<td>BUCKET_OFFLINE</td>
</tr>
<tr>
<td><code>apiBaseUrl</code></td>
<td>string</td>
<td>The base API URL for the Bucket servers.</td>
<td>BUCKET_API_BASE_URL</td>
</tr>
<tr>
<td><code>featureOverrides</code></td>
<td>Record&lt;string, boolean&gt;</td>
<td>An object specifying feature overrides for testing or local development. See <a href="https://github.com/bucketco/bucket-javascript-sdk/tree/main/packages/browser-sdk/example/app.test.ts">example/app.test.ts</a> for how to use <code>featureOverrides</code> in tests.</td>
<td>BUCKET_FEATURES_ENABLED, BUCKET_FEATURES_DISABLED</td>
</tr>
<tr>
<td><code>configFile</code></td>
<td>string</td>
<td>Load this config file from disk. Default: <code>bucketConfig.json</code></td>
<td>BUCKET_CONFIG_FILE</td>
</tr>
</tbody>
</table>
<p>Note: BUCKET_FEATURES_ENABLED, BUCKET_FEATURES_DISABLED are comma separated lists of features which will be enabled or disabled respectively.</p>
<p><code>bucketConfig.json</code> example:</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-18">&quot;secretKey&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;...&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-18">&quot;logLevel&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;warn&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-18">&quot;offline&quot;</span><span class="hl-1">: </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-18">&quot;apiBaseUrl&quot;</span><span class="hl-1">: </span><span class="hl-5">&quot;https://proxy.slick-demo.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-18">&quot;featureOverrides&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-18">&quot;huddles&quot;</span><span class="hl-1">: </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-18">&quot;voiceChat&quot;</span><span class="hl-1">: </span><span class="hl-0">false</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>When using a <code>bucketConfig.json</code> for local development, make sure you add it to your
<code>.gitignore</code> file. You can also set these options directly in the <code>BucketClient</code>
constructor. The precedence for configuration options is as follows, listed in the
order of importance:</p>
<ol>
<li>Options passed along to the constructor directly,</li>
<li>Environment variable,</li>
<li>The config file.</li>
</ol>
<a id="type-safe-feature-flags" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Type safe feature flags<a href="#type-safe-feature-flags" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To get type checked feature flags, add the list of flags to your <code>bucket.ts</code> file.
Any feature look ups will now be checked against the list you maintain.</p>
<pre><code class="typescript"><span class="hl-17">import</span><span class="hl-1"> { </span><span class="hl-4">BucketClient</span><span class="hl-1"> } </span><span class="hl-17">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@bucketco/node-sdk&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Extending the Features interface to define the available features</span><br/><span class="hl-0">declare</span><span class="hl-1"> </span><span class="hl-0">module</span><span class="hl-1"> </span><span class="hl-5">&quot;@bucketco/node-sdk&quot;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">interface</span><span class="hl-1"> </span><span class="hl-8">Features</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">&quot;show-todos&quot;</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">&quot;create-todos&quot;</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">&quot;delete-todos&quot;</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-17">export</span><span class="hl-1"> </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">bucketClient</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">BucketClient</span><span class="hl-1">();</span><br/><br/><span class="hl-4">bucketClient</span><span class="hl-1">.</span><span class="hl-3">initialize</span><span class="hl-1">().</span><span class="hl-3">then</span><span class="hl-1">({</span><br/><span class="hl-1">  console.log(</span><span class="hl-5">&quot;Bucket initialized!&quot;</span><span class="hl-4">)</span><br/><span class="hl-4">  bucketClient.getFeature(</span><span class="hl-5">&quot;invalid-feature&quot;</span><span class="hl-4">) </span><span class="hl-6">// feature doesn&#39;t exist</span><br/><span class="hl-4">})</span><br/>
</code><button type="button">Copy</button></pre>

<p><img src="../media/type-check-failed.png" alt="Type check failed" title="Type check failed"></p>
<a id="using-with-express" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Using with Express<a href="#using-with-express" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A popular way to integrate the Bucket Node.js SDK is through an express middleware.</p>
<pre><code class="typescript"><span class="hl-17">import</span><span class="hl-1"> </span><span class="hl-4">bucket</span><span class="hl-1"> </span><span class="hl-17">from</span><span class="hl-1"> </span><span class="hl-5">&quot;./bucket&quot;</span><span class="hl-1">;</span><br/><span class="hl-17">import</span><span class="hl-1"> </span><span class="hl-4">express</span><span class="hl-1"> </span><span class="hl-17">from</span><span class="hl-1"> </span><span class="hl-5">&quot;express&quot;</span><span class="hl-1">;</span><br/><span class="hl-17">import</span><span class="hl-1"> { </span><span class="hl-4">BoundBucketClient</span><span class="hl-1"> } </span><span class="hl-17">from</span><span class="hl-1"> </span><span class="hl-5">&quot;@bucketco/node-sdk&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Augment the Express types to include a `boundBucketClient` property on the</span><br/><span class="hl-6">// `res.locals` object.</span><br/><span class="hl-6">// This will allow us to access the BucketClient instance in our route handlers</span><br/><span class="hl-6">// without having to pass it around manually</span><br/><span class="hl-0">declare</span><span class="hl-1"> </span><span class="hl-4">global</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">namespace</span><span class="hl-1"> </span><span class="hl-8">Express</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">interface</span><span class="hl-1"> </span><span class="hl-8">Locals</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">boundBucketClient</span><span class="hl-1">: </span><span class="hl-8">BoundBucketClient</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// Add express middleware</span><br/><span class="hl-4">app</span><span class="hl-1">.</span><span class="hl-3">use</span><span class="hl-1">((</span><span class="hl-4">req</span><span class="hl-1">, </span><span class="hl-4">res</span><span class="hl-1">, </span><span class="hl-4">next</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">// Extract the user and company IDs from the request</span><br/><span class="hl-1">  </span><span class="hl-6">// You&#39;ll want to use a proper authentication and identification</span><br/><span class="hl-1">  </span><span class="hl-6">// mechanism in a real-world application</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">?.</span><span class="hl-4">id</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">?.</span><span class="hl-4">name</span><br/><span class="hl-1">    </span><span class="hl-4">email</span><span class="hl-1">: </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">?.</span><span class="hl-4">email</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">company</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">?.</span><span class="hl-4">companyId</span><br/><span class="hl-1">    </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">?.</span><span class="hl-4">companyName</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// Create a new BoundBucketClient instance by calling the `bindClient`</span><br/><span class="hl-1">  </span><span class="hl-6">// method on a `BucketClient` instance</span><br/><span class="hl-1">  </span><span class="hl-6">// This will create a new instance that is bound to the user/company given.</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">boundBucketClient</span><span class="hl-1"> = </span><span class="hl-4">bucket</span><span class="hl-1">.</span><span class="hl-3">bindClient</span><span class="hl-1">({ </span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">company</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// Store the BoundBucketClient instance in the `res.locals` object so we</span><br/><span class="hl-1">  </span><span class="hl-6">// can access it in our route handlers</span><br/><span class="hl-1">  </span><span class="hl-4">res</span><span class="hl-1">.</span><span class="hl-4">locals</span><span class="hl-1">.</span><span class="hl-4">boundBucketClient</span><span class="hl-1"> = </span><span class="hl-4">boundBucketClient</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">next</span><span class="hl-1">();</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// Now use res.locals.boundBucketClient in your handlers</span><br/><span class="hl-4">app</span><span class="hl-1">.</span><span class="hl-3">get</span><span class="hl-1">(</span><span class="hl-5">&quot;/todos&quot;</span><span class="hl-1">, </span><span class="hl-0">async</span><span class="hl-1"> (</span><span class="hl-4">_req</span><span class="hl-1">, </span><span class="hl-4">res</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">track</span><span class="hl-1">, </span><span class="hl-2">isEnabled</span><span class="hl-1"> } = </span><span class="hl-4">res</span><span class="hl-1">.</span><span class="hl-4">locals</span><span class="hl-1">.</span><span class="hl-4">bucketUser</span><span class="hl-1">.</span><span class="hl-3">getFeature</span><span class="hl-1">(</span><span class="hl-5">&quot;show-todos&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-17">if</span><span class="hl-1"> (!</span><span class="hl-4">isEnabled</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">res</span><span class="hl-1">.</span><span class="hl-3">status</span><span class="hl-1">(</span><span class="hl-16">403</span><span class="hl-1">).</span><span class="hl-3">send</span><span class="hl-1">({</span><span class="hl-5">&quot;error&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">&quot;feature inaccessible&quot;</span><span class="hl-1">})</span><br/><span class="hl-1">    </span><span class="hl-17">return</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  ...</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>See <a href="https://github.com/bucketco/bucket-javascript-sdk/tree/main/packages/node-sdk/example/app.ts">example/app.ts</a> for a full example.</p>
<a id="remote-flag-evaluation-with-stored-context" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Remote flag evaluation with stored context<a href="#remote-flag-evaluation-with-stored-context" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you don't want to provide context each time when evaluating feature flags but
rather you would like to utilise the attributes you sent to Bucket previously
(by calling <code>updateCompany</code> and <code>updateUser</code>) you can do so by calling <code>getFeaturesRemote</code>
(or <code>getFeatureRemote</code> for a specific feature) with providing just <code>userId</code> and <code>companyId</code>.
These methods will call Bucket's servers and feature flags will be evaluated remotely
using the stored attributes.</p>
<pre><code class="typescript"><span class="hl-6">// Update user and company attributes</span><br/><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">updateUser</span><span class="hl-1">(</span><span class="hl-5">&quot;john_doe&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">attributes:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;John O.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">role:</span><span class="hl-1"> </span><span class="hl-5">&quot;admin&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">updateCompany</span><span class="hl-1">(</span><span class="hl-5">&quot;acme_inc&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">attributes:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;Acme, Inc&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">tier:</span><span class="hl-1"> </span><span class="hl-5">&quot;premium&quot;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><span class="hl-1">...</span><br/><br/><span class="hl-6">// This will evaluate feature flags with respecting the attributes sent previously</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">features</span><span class="hl-1"> = </span><span class="hl-17">await</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">getFeaturesRemote</span><span class="hl-1">(</span><span class="hl-5">&quot;acme_inc&quot;</span><span class="hl-1">, </span><span class="hl-5">&quot;john_doe&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>NOTE: User and company attribute updates are processed asynchronously, so there might
be a small delay between when attributes are updated and when they are available
for evaluation.</p>
<a id="opting-out-of-tracking" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Opting out of tracking<a href="#opting-out-of-tracking" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>There are use cases in which you not want to be sending <code>user</code>, <code>company</code> and
<code>track</code> events to <a href="http://Bucket.co">Bucket.co</a>. These are usually cases where you could be impersonating
another user in the system and do not want to interfere with the data being
collected by Bucket.</p>
<p>To disable tracking, bind the client using <code>bindClient()</code> as follows:</p>
<pre><code class="typescript"><span class="hl-6">// binds the client to a given user and company and set `enableTracking` to `false`.</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">boundClient</span><span class="hl-1"> = </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">bindClient</span><span class="hl-1">({ </span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">company</span><span class="hl-1">, </span><span class="hl-4">enableTracking:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1"> });</span><br/><br/><span class="hl-4">boundClient</span><span class="hl-1">.</span><span class="hl-3">track</span><span class="hl-1">(</span><span class="hl-5">&quot;some event&quot;</span><span class="hl-1">); </span><span class="hl-6">// this will not actually send the event to Bucket.</span><br/><br/><span class="hl-6">// the following code will not update the `user` nor `company` in Bucket and will</span><br/><span class="hl-6">// not send `track` events either.</span><br/><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">isEnabled</span><span class="hl-1">, </span><span class="hl-2">track</span><span class="hl-1"> } = </span><span class="hl-4">boundClient</span><span class="hl-1">.</span><span class="hl-3">getFeature</span><span class="hl-1">(</span><span class="hl-5">&quot;user-menu&quot;</span><span class="hl-1">);</span><br/><span class="hl-17">if</span><span class="hl-1"> (</span><span class="hl-4">isEnabled</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">track</span><span class="hl-1">();</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Another way way to disable tracking without employing a bound client is to call <code>getFeature()</code>
or <code>getFeatures()</code> by supplying <code>enableTracking: false</code> in the arguments passed to
these functions.</p>
<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><use href="../assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
Note, however, that calling <code>track()</code>, <code>updateCompany()</code> or <code>updateUser()</code> in the <code>BucketClient</code>
will still send tracking data. As such, it is always recommended to use <code>bindClient()</code>
when using this SDK.</p>
</div>
<a id="flushing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Flushing<a href="#flushing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It is highly recommended that users of this SDK manually call <code>flush()</code>
method on process shutdown. The SDK employs a batching technique to minimize
the number of calls that are sent to Bucket's servers. During process shutdown,
some messages could be waiting to be sent, and thus, would be discarded if the
buffer is not flushed.</p>
<p>A naive example:</p>
<pre><code class="typescript"><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-5">&quot;SIGINT&quot;</span><span class="hl-1">, () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-5">&quot;Flushing batch buffer...&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">flush</span><span class="hl-1">().</span><span class="hl-3">then</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-3">exit</span><span class="hl-1">(</span><span class="hl-16">0</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>When you bind a client to a user/company, this data is matched against the
targeting rules. To get accurate targeting, you must ensure that the user/company
information provided is sufficient to match against the targeting rules you've
created. The user/company data is automatically transferred to Bucket. This ensures
that you'll have up-to-date information about companies and users and accurate
targeting information available in Bucket at all time.</p>
<a id="tracking-custom-events-and-setting-custom-attributes" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Tracking custom events and setting custom attributes<a href="#tracking-custom-events-and-setting-custom-attributes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Tracking allows events and updating user/company attributes in Bucket.
For example, if a customer changes their plan, you'll want Bucket to know about it,
in order to continue to provide up-do-date targeting information in the Bucket interface.</p>
<p>The following example shows how to register a new user, associate it with a company
and finally update the plan they are on.</p>
<pre><code class="typescript"><span class="hl-6">// registers the user with Bucket using the provided unique ID, and</span><br/><span class="hl-6">// providing a set of custom attributes (can be anything)</span><br/><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">updateUser</span><span class="hl-1">(</span><span class="hl-5">&quot;user_id&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">attributes:</span><span class="hl-1"> { </span><span class="hl-4">longTimeUser:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">, </span><span class="hl-4">payingCustomer:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span><br/><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">updateCompany</span><span class="hl-1">(</span><span class="hl-5">&quot;company_id&quot;</span><span class="hl-1">, { </span><span class="hl-4">userId:</span><span class="hl-1"> </span><span class="hl-5">&quot;user_id&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-6">// the user started a voice huddle</span><br/><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">track</span><span class="hl-1">(</span><span class="hl-5">&quot;user_id&quot;</span><span class="hl-1">, </span><span class="hl-5">&quot;huddle&quot;</span><span class="hl-1">, { </span><span class="hl-4">attributes:</span><span class="hl-1"> { </span><span class="hl-4">voice:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> } });</span>
</code><button type="button">Copy</button></pre>

<p>It's also possible to achieve the same through a bound client in the following manner:</p>
<pre><code class="typescript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">boundClient</span><span class="hl-1"> = </span><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">bindClient</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">user:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-5">&quot;user_id&quot;</span><span class="hl-1">, </span><span class="hl-4">longTimeUser:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">, </span><span class="hl-4">payingCustomer:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-4">company:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-5">&quot;company_id&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">boundClient</span><span class="hl-1">.</span><span class="hl-3">track</span><span class="hl-1">(</span><span class="hl-5">&quot;huddle&quot;</span><span class="hl-1">, { </span><span class="hl-4">attributes:</span><span class="hl-1"> { </span><span class="hl-4">voice:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> } });</span>
</code><button type="button">Copy</button></pre>

<p>Some attributes are used by Bucket to improve the UI, and are recommended
to provide for easier navigation:</p>
<ul>
<li><code>name</code> -- display name for <code>user</code>/<code>company</code>,</li>
<li><code>email</code> -- the email of the user.</li>
</ul>
<p>Attributes cannot be nested (multiple levels) and must be either strings,
integers or booleans.</p>
<a id="managing-last-seen" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Managing <code>Last seen</code><a href="#managing-last-seen" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>By default <code>updateUser</code>/<code>updateCompany</code> calls automatically update the given
user/company <code>Last seen</code> property on Bucket servers.</p>
<p>You can control if <code>Last seen</code> should be updated when the events are sent by setting
<code>meta.active = false</code>. This is often useful if you
have a background job that goes through a set of companies just to update their
attributes but not their activity.</p>
<p>Example:</p>
<pre><code class="typescript"><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">updateUser</span><span class="hl-1">(</span><span class="hl-5">&quot;john_doe&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">attributes:</span><span class="hl-1"> { </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;John O.&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-4">meta:</span><span class="hl-1"> { </span><span class="hl-4">active:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">updateCompany</span><span class="hl-1">(</span><span class="hl-5">&quot;acme_inc&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">attributes:</span><span class="hl-1"> { </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-5">&quot;Acme, Inc&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-4">meta:</span><span class="hl-1"> { </span><span class="hl-4">active:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><code>bindClient()</code> updates attributes on the Bucket servers but does not automatically
update <code>Last seen</code>.</p>
<a id="zero-pii" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Zero PII<a href="#zero-pii" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The Bucket SDK doesn't collect any metadata and HTTP IP addresses are <em>not</em> being
stored. For tracking individual users, we recommend using something like database
ID as userId, as it's unique and doesn't include any PII (personal identifiable
information). If, however, you're using e.g. email address as userId, but prefer
not to send any PII to Bucket, you can hash the sensitive data before sending
it to Bucket:</p>
<pre><code class="typescript"><span class="hl-17">import</span><span class="hl-1"> { </span><span class="hl-4">sha256</span><span class="hl-1"> } </span><span class="hl-17">from</span><span class="hl-1"> </span><span class="hl-5">&#39;crypto-hash&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">client</span><span class="hl-1">.</span><span class="hl-3">updateUser</span><span class="hl-1">({ </span><span class="hl-4">userId:</span><span class="hl-1"> </span><span class="hl-17">await</span><span class="hl-1"> </span><span class="hl-3">sha256</span><span class="hl-1">(</span><span class="hl-5">&quot;john_doe&quot;</span><span class="hl-1">), ... });</span>
</code><button type="button">Copy</button></pre>

<a id="typescript" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Typescript<a href="#typescript" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Types are bundled together with the library and exposed automatically when importing
through a package manager.</p>
<a id="license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><blockquote>
<p>MIT License
Copyright (c) 2024 Bucket ApS</p>
</blockquote>
</section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Classes"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Classes</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary"><a id="boundbucketclient" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><a href="../classes/_bucketco_node-sdk.BoundBucketClient.html">BoundBucketClient</a><a href="#boundbucketclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="bucketclient" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><a href="../classes/_bucketco_node-sdk.BucketClient.html">BucketClient</a><a href="#bucketclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Interfaces"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Interfaces</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary"><a id="contextwithtracking" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_bucketco_node-sdk.ContextWithTracking.html">ContextWithTracking</a><a href="#contextwithtracking" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="feature" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_bucketco_node-sdk.Feature.html">Feature</a><a href="#feature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="features" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_bucketco_node-sdk.Features.html">Features</a><a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="httpclient" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_bucketco_node-sdk.HttpClient.html">HttpClient</a><a href="#httpclient" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="logger" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_bucketco_node-sdk.Logger.html">Logger</a><a href="#logger" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="rawfeature" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_bucketco_node-sdk.RawFeature.html">RawFeature</a><a href="#rawfeature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Type Aliases"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Type Aliases</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary"><a id="attributes" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.Attributes.html">Attributes</a><a href="#attributes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="batchbufferoptions" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.BatchBufferOptions.html">BatchBufferOptions</a><a href="#batchbufferoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="clientoptions" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.ClientOptions.html">ClientOptions</a><a href="#clientoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="context" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.Context.html">Context</a><a href="#context" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="featureoverrides" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.FeatureOverrides.html">FeatureOverrides</a><a href="#featureoverrides" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="featureoverridesfn" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.FeatureOverridesFn.html">FeatureOverridesFn</a><a href="#featureoverridesfn" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="httpclientresponse" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.HttpClientResponse.html">HttpClientResponse</a><a href="#httpclientresponse" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="idtype" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.IdType.html">IdType</a><a href="#idtype" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="loglevel" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.LogLevel.html">LogLevel</a><a href="#loglevel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="trackingmeta" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.TrackingMeta.html">TrackingMeta</a><a href="#trackingmeta" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="trackoptions" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.TrackOptions.html">TrackOptions</a><a href="#trackoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary"><a id="typedfeatures" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_bucketco_node-sdk.TypedFeatures.html">TypedFeatures</a><a href="#typedfeatures" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Variables"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Variables</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary"><a id="log_levels" class="tsd-anchor"></a><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><a href="../variables/_bucketco_node-sdk.LOG_LEVELS.html">LOG_LEVELS</a><a href="#log_levels" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#bucket-nodejs-sdk"><span>Bucket <wbr/>Node.js SDK</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#basic-usage"><span>Basic usage</span></a></li><li><a href="#high-performance-feature-targeting"><span>High performance feature targeting</span></a></li><li><a href="#configuring"><span>Configuring</span></a></li><li><a href="#type-safe-feature-flags"><span>Type safe feature flags</span></a></li><li><a href="#using-with-express"><span>Using with <wbr/>Express</span></a></li><li><a href="#remote-flag-evaluation-with-stored-context"><span>Remote flag evaluation with stored context</span></a></li><li><a href="#opting-out-of-tracking"><span>Opting out of tracking</span></a></li><li><a href="#flushing"><span>Flushing</span></a></li><li><a href="#tracking-custom-events-and-setting-custom-attributes"><span>Tracking custom events and setting custom attributes</span></a></li><li><a href="#managing-last-seen"><span>Managing <wbr/>Last seen</span></a></li><li><ul><li><a href="#zero-pii"><span>Zero PII</span></a></li><li><a href="#typescript"><span>Typescript</span></a></li></ul></li><li><a href="#license"><span>License</span></a></li></ul><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Classes"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Classes</summary><div><a href="#boundbucketclient" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Bound<wbr/>Bucket<wbr/>Client</span></a><a href="#bucketclient" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Bucket<wbr/>Client</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Interfaces"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Interfaces</summary><div><a href="#contextwithtracking" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Context<wbr/>With<wbr/>Tracking</span></a><a href="#feature" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Feature</span></a><a href="#features" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Features</span></a><a href="#httpclient" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Http<wbr/>Client</span></a><a href="#logger" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Logger</span></a><a href="#rawfeature" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Raw<wbr/>Feature</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Type Aliases"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Type Aliases</summary><div><a href="#attributes" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Attributes</span></a><a href="#batchbufferoptions" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Batch<wbr/>Buffer<wbr/>Options</span></a><a href="#clientoptions" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Client<wbr/>Options</span></a><a href="#context" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Context</span></a><a href="#featureoverrides" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Feature<wbr/>Overrides</span></a><a href="#featureoverridesfn" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Feature<wbr/>Overrides<wbr/>Fn</span></a><a href="#httpclientresponse" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Http<wbr/>Client<wbr/>Response</span></a><a href="#idtype" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Id<wbr/>Type</span></a><a href="#loglevel" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Log<wbr/>Level</span></a><a href="#trackingmeta" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Tracking<wbr/>Meta</span></a><a href="#trackoptions" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Track<wbr/>Options</span></a><a href="#typedfeatures" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Typed<wbr/>Features</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Variables"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Variables</summary><div><a href="#log_levels" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><span>LOG_<wbr/>LEVELS</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html">Documentation</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
